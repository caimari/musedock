# ===============================================
# MUSEDOCK CMS - ENVIRONMENT CONFIGURATION
# ===============================================
# IMPORTANT: Copy this file to .env and update values
# DO NOT upload .env file to your repository (must be in .gitignore)

# --- APPLICATION ---
APP_ENV=production
APP_DEBUG=false
APP_NAME="MuseDock CMS"
APP_URL=https://your-domain.com

# Application key (generate with: php -r "echo bin2hex(random_bytes(32));")
APP_KEY=

# --- DATABASE ---
# Driver: mysql or pgsql (postgresql)
DB_DRIVER=mysql
DB_HOST=localhost
DB_PORT=3306
DB_NAME=
DB_USER=
DB_PASS=

# --- CLOUD STORAGE (Optional) ---

# Cloudflare R2 Configuration
R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=
R2_ENDPOINT=
R2_URL=

# Amazon S3 Configuration
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-west-1
AWS_BUCKET=
AWS_URL=

# --- SESSIONS ---
SESSION_LIFETIME=7200
SESSION_SECURE=true
SESSION_HTTPONLY=true
SESSION_SAMESITE=Strict

# --- REDIS (For WebSocket and real-time notifications) ---
# Enable only if you have Redis installed
REDIS_ENABLED=false
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_TIMEOUT=2.5

# --- WEBSOCKET (Real-time notifications) ---
# Port where WebSocket server will run
# Run: php websocket-server.php
WEBSOCKET_ENABLED=false
WEBSOCKET_HOST=0.0.0.0
WEBSOCKET_PORT=8080

# --- RATE LIMITING ---
RATE_LIMIT_ATTEMPTS=5
RATE_LIMIT_DECAY_MINUTES=15

# --- FILE UPLOADS ---
UPLOAD_MAX_SIZE=10485760
ALLOWED_IMAGE_MIMES=image/jpeg,image/png,image/gif,image/webp
ALLOWED_DOCUMENT_MIMES=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,webp,pdf,doc,docx

# --- LOGS ---
LOG_LEVEL=warning
LOG_MAX_FILES=30
LOG_PATH=/storage/logs/error.log

# --- PASSWORD SECURITY ---
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_RESET_EXPIRY=60

# --- MULTI-TENANT ---
# Enable multi-tenancy system (multiple domains)
# false = Classic mode (single site) - RECOMMENDED for new installations
# true = Multi-tenant mode (multiple sites/domains from single panel)
MULTI_TENANT_ENABLED=false

# Main system domain (only needed if MULTI_TENANT_ENABLED=true)
# This domain will show superadmin panel (/musedock) and main site
MAIN_DOMAIN=localhost

# Default settings
DEFAULT_THEME=default
DEFAULT_LANG=en

# Admin panel routes
ADMIN_PATH_TENANT=admin
ADMIN_PATH_MUSEDOCK=musedock

# ===============================================
# EMAIL / MAIL
# ===============================================

# --- GENERAL CONFIGURATION ---
# Sending method: 'mail' or 'smtp'
# - 'mail': Uses PHP mail() function (simpler, requires server configuration)
# - 'smtp': Uses external SMTP server (Gmail, SendGrid, Mailgun, etc.)
MAIL_DRIVER=mail

# Default sender
MAIL_FROM_ADDRESS=noreply@your-domain.com
MAIL_FROM_NAME="MuseDock CMS"

# --- SMTP CONFIGURATION (Only if MAIL_DRIVER=smtp) ---
# Uncomment and configure if using MAIL_DRIVER=smtp

# Gmail (requires "App Password" if using 2FA)
#SMTP_HOST=smtp.gmail.com
#SMTP_PORT=587
#SMTP_USERNAME=your-email@gmail.com
#SMTP_PASSWORD=your-16-character-app-password
#SMTP_ENCRYPTION=tls

# Outlook/Office365
#SMTP_HOST=smtp.office365.com
#SMTP_PORT=587
#SMTP_USERNAME=your-email@outlook.com
#SMTP_PASSWORD=your-password
#SMTP_ENCRYPTION=tls

# SendGrid
#SMTP_HOST=smtp.sendgrid.net
#SMTP_PORT=587
#SMTP_USERNAME=apikey
#SMTP_PASSWORD=your-sendgrid-api-key
#SMTP_ENCRYPTION=tls

# Mailgun
#SMTP_HOST=smtp.mailgun.org
#SMTP_PORT=587
#SMTP_USERNAME=postmaster@your-mailgun-domain
#SMTP_PASSWORD=your-mailgun-password
#SMTP_ENCRYPTION=tls

# Amazon SES
#SMTP_HOST=email-smtp.us-east-1.amazonaws.com
#SMTP_PORT=587
#SMTP_USERNAME=your-smtp-username
#SMTP_PASSWORD=your-smtp-password
#SMTP_ENCRYPTION=tls

# Custom SMTP server
#SMTP_HOST=mail.your-domain.com
#SMTP_PORT=587
#SMTP_USERNAME=your-email@your-domain.com
#SMTP_PASSWORD=your-password
#SMTP_ENCRYPTION=tls

# Encryption options:
# - tls: STARTTLS (port 587) - Recommended
# - ssl: SSL/TLS direct (port 465)
# - (empty): No encryption (port 25) - Not recommended

# ===============================================
# SCHEDULED TASKS (CRON/PSEUDO-CRON)
# ===============================================

# --- EXECUTION MODE ---
# Options: pseudo | real | disabled
# - pseudo: Runs on each request (with throttle) - shared hosting
# - real: Runs via system crontab - VPS/dedicated hosting
# - disabled: Disable scheduled tasks
CRON_MODE=pseudo

# --- PSEUDO-CRON: EXECUTION INTERVAL ---
# Only applies if CRON_MODE=pseudo
# Minimum time in seconds between executions (prevents overload)
# Recommended values: 3600 (1 hour), 7200 (2 hours), 86400 (1 day)
PSEUDO_CRON_INTERVAL=3600

# ===============================================
# AUTOMATIC TRASH CLEANUP
# ===============================================

# --- ENABLE/DISABLE ---
TRASH_AUTO_DELETE_ENABLED=true

# --- RETENTION DAYS ---
# Number of days before permanent deletion
# Default: 30 days (similar to Gmail, Outlook)
TRASH_RETENTION_DAYS=30

# --- NOTIFICATIONS ---
# Notify user before deletion (days in advance)
# 0 = no prior notification
TRASH_NOTIFY_BEFORE_DAYS=7

# ===============================================
# AUTOMATIC REVISION CLEANUP
# ===============================================

# --- ENABLE/DISABLE ---
REVISION_CLEANUP_ENABLED=true

# --- MIXED RETENTION POLICY ---

# 1. Recent revisions (always keep)
# Last N revisions: NEVER deleted
REVISION_KEEP_RECENT=5

# 2. Old revisions (1 per month)
# Keep 1 revision per month for the last X months
# Example: 12 = keep 1 revision/month for last year
REVISION_KEEP_MONTHLY=12

# 3. Very old revisions (1 per year)
# Keep 1 revision per year for the last X years
# Example: 3 = keep 1 revision/year for last 3 years
REVISION_KEEP_YEARLY=3

# NOTE: Revisions older than these limits are deleted

# ===============================================
# MARKETPLACE
# ===============================================

# --- ENABLE/DISABLE MARKETPLACE ---
# Marketplace allows installing modules, plugins and themes from central repository
# true = Marketplace enabled (shows menu and allows installations)
# false = Marketplace disabled (hides menu and blocks access)
MARKETPLACE_ENABLED=false

# Marketplace server URL (only if you have your own)
# Default uses: https://api.musedock.org/v1/marketplace
#MARKETPLACE_API_URL=https://api.musedock.org/v1/marketplace
